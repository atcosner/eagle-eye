{% extends 'base.html' %}

{% block title %}KU BDI Collection Processor - Job Results{% endblock %}

{% block head %}
{% endblock %}

{% block content %}
    <h2>Job: {{ job_id }}</h2>

    <div style="display: flex; margin-bottom: 5px;">
        <button><-</button>
        <button>-></button>
        <h3 id="image_id" style="margin: 0; padding-left: 10px;">Image: 0</h3>
    </div>

    <div id="results-viewport">
        <form
                id="job-results-corrections"
                action="/job-status/{{ job_id }}/update"
                method="post"
                enctype="multipart/form-data"
        >
            <table>
                <tr>
                    <th>Data Field</th>
                    <th>ROI Image</th>
                    <th>Extracted Text</th>
                </tr>
                    {% for result in results %}
                        <tr>
                            <td>{{ result.field.name }}</td>
                            <td><img src="/job-file/{{ job_id }}/0/{{ result.roi_image_path.name }}"/></td>
                            <td>
                                <input
                                        type="text"
                                        name="{{ result.field.name }}"
                                        {% if result.user_corrected_text is not none %}
                                            value="{{ result.user_corrected_text }}"
                                        {% else %}
                                            value="{{ result.extracted_text }}"
                                        {% endif %}
                                >
                            </td>
                        </tr>
                    {% endfor %}
            </table>

            <input type="submit" value="Submit"/>
        </form>
    </div>
{% endblock %}
